resource_types:
- name: gcs
  type: docker-image
  source:
    repository: frodenas/gcs-resource

resources:
- name: git-kubo-ci
  type: git
  source:
    uri: git@github.com:cloudfoundry-incubator/kubo-ci
    branch: master
    private_key: ((git-ssh-key.private_key))

- name: gcs-gcp-vanilla-istio-shipables
  type: gcs
  source:
    json_key: ((gcs-json-key))
    bucket: kubo-pipeline-store
    versioned_file: shipables/gcp-vanilla-istio

- name: gcs-gcp-vanilla-turbulence-shipables
  type: gcs
  source:
    json_key: ((gcs-json-key))
    bucket: kubo-pipeline-store
    versioned_file: shipables/gcp-vanilla-turbulence

- name: gcs-gcp-custom-cidrs-integration-shipables
  type: gcs
  source:
    json_key: ((gcs-json-key))
    bucket: kubo-pipeline-store
    versioned_file: shipables/gcp-custom-cidrs-integration

jobs:
- name: signal-aggregator
  plan:
  - get: git-kubo-ci
  - get: gcs-gcp-vanilla-turbulence-shipables
  - get: gcs-gcp-custom-cidrs-integration-shipables
  - get: gcs-gcp-vanilla-istio-shipables
  - task: aggregate-test-signals
    file: git-kubo-ci/tasks/aggregate-test-signals.yml

